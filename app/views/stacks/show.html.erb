<header class="repo-header">
  <div class="wrapper">
    <div class="repo-name">
      <p>Repo owned by <%= @stack.repo_owner %></p>
      <h1><a href="<%= stack_path(@stack) %>"><%= @stack.repo_name %> <small><%= @stack.environment %></small></a></h1>
    </div>
    <div class="header-accessory">
      <a href="<%= github_repo_url(@stack.repo_owner, @stack.repo_name) %>" class="ico-github" data-tooltip="View repo on Github">Github Repo</a>
      <a href="<%= settings_stack_path(@stack) %>" class="ico-settings" data-tooltip="Settings">Settings</a>
    </div>
  </div>
</header>

<div class="wrapper">
  <section>
    <header class="section-header">
      <h2><%= @commits.empty? ? 'No' : @commits.size %> Undeployed Commits</h2>
    </header>
    <%- if @commits.empty? -%>
      <p><%= emoji_tag(:walrus) %> is happy. Good job!</p>
    <%- else -%>
      <ul class="commit-lst">
        <%= render partial: 'commit', collection: @commits %>
      </ul>
    <%- end -%>
  </section>

  <% if @ongoing_deploy %>

    <section>
      <header class="section-header">
        <h2><%= @ongoing_commits.size %> Commits being deployed</h2>
      </header>
      <ul class="commit-lst">
        <%= render 'deploy', deploy: @ongoing_deploy %>
        <%= render partial: 'commit', collection: @ongoing_commits %>
      </ul>
    </section>
  <% end %>

  <section>
    <header class="section-header">
      <h2>Previous Deploys</h2>
    </header>
    <ul class="commit-lst">
      <%= render partial: 'deploy', collection: @deploys %>
    </ul>
  </section>
</div>
